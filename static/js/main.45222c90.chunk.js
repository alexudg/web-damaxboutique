(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],Array(22).concat([function(e,t,c){},,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(16),s=c.n(n),r=(c(22),c(8)),a=c(6),i=c(3),l=c.n(i),o=c(5),j=c(4),u=c(2),d=c(1),b="http://gucitex.com.mx/web-damaxboutique/backend",O="0eab84ea-917d-4817-9e33-c98caecf626d",h=Object(u.createContext)(),m=function(e){var t=e.children,c=Object(u.useState)(JSON.parse(window.sessionStorage.getItem("damax"))),n=Object(j.a)(c,2),s=n[0],r=n[1],i=Object(u.useState)(JSON.parse(window.sessionStorage.getItem("customer"))),m=Object(j.a)(i,2),x=m[0],p=m[1],f=Object(u.useState)(window.localStorage.getItem("cart")?JSON.parse(window.localStorage.getItem("cart")):[]),C=Object(j.a)(f,2),v=C[0],g=C[1],N=Object(u.useState)(0),k=Object(j.a)(N,2),y=k[0],S=k[1],w=Object(u.useState)(!1),A=Object(j.a)(w,2),E=A[0],D=A[1],I=Object(a.f)(),F=Object(u.useCallback)((function(){window.sessionStorage.clear(),r(null),I("/")}),[I]),M=Object(u.useCallback)((function(){window.sessionStorage.clear(),p(null),I("/")}),[I]),T=Object(u.useCallback)(function(){var e=Object(o.a)(l.a.mark((function e(t){var c,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.length>1&&void 0!==r[1]?r[1]:O,e.next=3,fetch(b+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:c}}).then((function(e){return e.text()})).then((function(e){return console.log(e),console.log(JSON.parse(e)),JSON.parse(e)})).catch((function(e){return window.alert("NO ES POSIBLE COMUNICARSE CON EL SERVIDOR"),null}));case 3:return null!==(n=e.sent)&&(n.isAuth||(s?F():M()),delete n.isAuth),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[F,M,s]);function P(){return P=Object(o.a)(l.a.mark((function e(t,c){var n,s,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:O,e.next=3,fetch(b+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify(c)}).then((function(e){return e.text()})).then((function(e){return console.log(e),JSON.parse(e)})).catch((function(e){return window.alert("NO ES POSIBLE COMUNICARSE CON EL SERVIDOR"),null}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function R(){return R=Object(o.a)(l.a.mark((function e(t,c){var n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:O,e.next=3,fetch(b+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify(c)}).then((function(e){return e.text()})).then((function(e){return console.log(e),JSON.parse(e)})).catch((function(e){return window.alert("NO ES POSIBLE COMUNICARSE CON EL SERVIDOR"),null}));case 3:return null!==(r=e.sent)&&(r.isAuth||(s?F():M()),delete r.isAuth),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function q(){return q=Object(o.a)(l.a.mark((function e(t,c){var n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:O,e.next=3,fetch(b+t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify(c)}).then((function(e){return e.text()})).then((function(e){return console.log(e),JSON.parse(e)})).catch((function(e){return window.alert("NO ES POSIBLE COMUNICARSE CON EL SERVIDOR"),null}));case 3:return null!==(r=e.sent)&&(r.isAuth||(s?F():M()),delete r.isAuth),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function H(){return H=Object(o.a)(l.a.mark((function e(t,c){var n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:O,e.next=3,fetch(b+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify(c)}).then((function(e){return e.text()})).then((function(e){return console.log(e),JSON.parse(e)})).catch((function(e){return window.alert("NO ES POSIBLE COMUNICARSE CON EL SERVIDOR"),null}));case 3:return null!==(r=e.sent)&&(r.isAuth||(s?F():M()),delete r.isAuth),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}return Object(d.jsx)(h.Provider,{value:{fetchGet:T,fetchPost:function(e,t){return R.apply(this,arguments)},fetchPostInput:function(e,t){return P.apply(this,arguments)},fetchPut:function(e,t){return q.apply(this,arguments)},fetchDelete:function(e,t){return H.apply(this,arguments)},userSession:s,setUserSession:r,userCloseSession:F,articlesCart:v,setArticlesCart:g,totalCart:y,setTotalCart:S,customerSession:x,setCustomerSession:p,customerCloseSession:M,isReturnToCart:E,setIsReturnToCart:D},children:t})},x=c(9),p=c(15),f=c.p+"./web-damaxboutique/static/media/logoDamax215x83.a8372eeb.jpg";c(25);function C(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.userSession,n=e.userCloseSession,s=e.customerSession,i=e.customerCloseSession,b=e.articlesCart,O=Object(u.useState)(!1),m=Object(j.a)(O,2),C=m[0],v=m[1],g=Object(u.useState)(!1),N=Object(j.a)(g,2),k=N[0],y=N[1],S=Object(u.useState)(!1),w=Object(j.a)(S,2),A=w[0],E=w[1],D=Object(u.useState)([]),I=Object(j.a)(D,2),F=I[0],M=I[1],T=Object(u.useState)(!1),P=Object(j.a)(T,2),R=P[0],q=P[1],H=Object(u.useState)(""),L=Object(j.a)(H,2),G=L[0],B=L[1],U=Object(a.f)(),W=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/index.php?fn=getAllCategories");case 2:null!==(c=e.sent)&&M(c.categories);case 4:case"end":return e.stop()}}),e)}))),[t]);Object(u.useEffect)((function(){return q(!1),B(""),0===F.length&&W(),function(){}}),[W,F.length]);var J=Object(u.useCallback)((function(){G.length>0&&U("/productos/texto/".concat(G))}),[U,G]);Object(u.useEffect)((function(){var e=setTimeout(J,1e3);return function(){clearTimeout(e)}}),[G,J]);var z=function(){v(!C)},$=function(){y(!k)},_=function(){E(!A)},X=function(){A&&E(!1),i()};function V(){return(V=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(t.target.value);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{className:c?"Header isUserSession":s?"Header isCustomerSession":"Header",onClick:function(e){R&&q(!1)},children:[Object(d.jsxs)("nav",{className:C?"Header-menu-categories active":"Header-menu-categories",children:[Object(d.jsx)(x.d,{className:"Header-icon-close",onClick:z}),Object(d.jsxs)("ul",{className:"Header-list",children:[Object(d.jsx)(r.b,{to:"/",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:z,children:"INICIO"})}),Object(d.jsx)("hr",{}),F.map((function(e){return e.isAvailable&&Object(d.jsxs)("div",{children:[Object(d.jsx)("hr",{}),Object(d.jsx)(r.b,{to:"/productos/categoria/".concat(e.categoryName),className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:z,children:e.categoryName})})]},e.id)}))]}),Object(d.jsx)("hr",{}),!c&&!s&&Object(d.jsx)(r.b,{to:"/input",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:z,children:"Cuenta"})}),s&&Object(d.jsx)(r.b,{to:"/input",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:X,children:"Cerrar sesi\xf3n"})})]}),Object(d.jsx)(x.f,{className:"Header-icon-burguer",onClick:z}),Object(d.jsx)(r.b,{to:"/",children:Object(d.jsx)("img",{className:"HeaderImg",src:f,alt:"logo"})}),!c&&Object(d.jsxs)("nav",{className:"NavRight",children:[!s&&Object(d.jsx)(r.b,{to:"/input",children:Object(d.jsx)(x.k,{className:"Header-icon-user"})}),Object(d.jsx)(x.i,{className:"Header-icon-search",onClick:function(){q(!R)}}),Object(d.jsx)(r.b,{to:"/carrito",children:Object(d.jsxs)("div",{className:"Header-container-cart",children:[Object(d.jsx)(x.j,{className:"Header-icon-cart"}),b.length>0&&Object(d.jsx)("span",{children:b.length})]})}),s&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{className:"Header-icon-menu-customer",onClick:_}),Object(d.jsx)("span",{className:"Header-customeremail",children:s.email})]})]}),c&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{className:"Header-icon-burguer",onClick:$}),Object(d.jsx)("span",{className:"Header-username",children:c.userName})]}),Object(d.jsxs)("nav",{className:k?"Header-menu-user active":"Header-menu-user",children:[Object(d.jsx)(x.d,{className:"Header-icon-close",onClick:$}),c&&Object(d.jsx)("p",{children:c.userName}),Object(d.jsxs)("ul",{className:"Header-list",children:[Object(d.jsx)(r.b,{to:"/categories",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:$,children:"CATEGORIAS"})}),Object(d.jsx)("hr",{}),Object(d.jsx)(r.b,{to:"/articles",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:$,children:"ART\xcdCULOS"})}),Object(d.jsx)("hr",{}),Object(d.jsx)(r.b,{to:"/customers",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:$,children:"CLIENTES"})}),Object(d.jsx)("hr",{}),Object(d.jsx)(r.b,{to:"/orders",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:$,children:"PEDIDOS"})})]}),Object(d.jsx)("hr",{}),c&&0===c.id&&Object(d.jsx)(r.b,{to:"/users",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:$,children:"Usuarios"})}),Object(d.jsx)(r.b,{to:"/user-pass",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:$,children:"Cambiar contrase\xf1a"})}),Object(d.jsx)(r.b,{to:"/",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:function(){$(),n()},children:"Cerrar sesi\xf3n"})})]}),Object(d.jsxs)("nav",{className:A?"Header-menu-customer active":"Header-menu-customer",children:[Object(d.jsx)(x.d,{className:"Header-icon-close",onClick:_}),s&&Object(d.jsx)("p",{children:s.email}),Object(d.jsxs)("ul",{className:"Header-list",children:[Object(d.jsx)(r.b,{to:"/customer-orders",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:_,children:"MIS PEDIDOS"})}),Object(d.jsx)("hr",{}),Object(d.jsx)(r.b,{to:"#",className:"Header-link-item",children:Object(d.jsx)("li",{className:"Header-item",onClick:_,children:"ESTADO DE CUENTA"})})]}),Object(d.jsx)("hr",{}),Object(d.jsx)(r.b,{to:"/customer-data",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:_,children:"Mis datos"})}),Object(d.jsx)(r.b,{to:"/customer-pass",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:_,children:"Cambiar contrase\xf1a"})}),Object(d.jsx)(r.b,{to:"/input",className:"Header-link-item",children:Object(d.jsx)("p",{className:"Header-item",onClick:X,children:"Cerrar sesi\xf3n"})})]})]}),R&&Object(d.jsxs)("section",{className:"Header-finder",children:[Object(d.jsx)(x.i,{className:"Header-finder-icon"}),Object(d.jsx)("input",{type:"search",name:"search",placeholder:"BUSCAR...",value:G,onChange:function(e){return V.apply(this,arguments)},autoFocus:R}),Object(d.jsx)(x.e,{className:"Header-finder-icon close",onClick:function(){q(!1),B("")}})]})]})}function v(){return Object(d.jsx)("h3",{children:"Bienvenidos"})}var g=c(10),N=c(7);c(26);function k(e){var t=e.msg,c=e.btnCloseClick,n=e.isSuccess,s=void 0!==n&&n;return Object(d.jsxs)("div",{className:s?"FormMessageWrapper success":"FormMessageWrapper",id:"formMessageWrapper",children:[Object(d.jsx)(x.e,{className:"FormMessageIcon",onClick:c}),Object(d.jsx)("pre",{children:t})," "]})}function y(){var e=Object(u.useContext)(h),t=e.fetchPostInput,c=e.userSession,n=e.setUserSession,s=Object(u.useState)({email:"",pass:""}),r=Object(j.a)(s,2),i=r[0],b=r[1],O=Object(u.useState)(""),m=Object(j.a)(O,2),x=m[0],p=m[1],f=Object(a.f)();Object(u.useEffect)((function(){c&&f("/")}),[c,f]);var C=function(e){p(e)},v=function(){var e=Object(o.a)(l.a.mark((function e(c){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,t("/user.php?fn=getDataUserFromPass",i);case 3:s=e.sent,b({email:"",pass:""}),s.isAuth?(s=s.user).isActive?(window.sessionStorage.clear(),window.sessionStorage.setItem("damax",JSON.stringify(s)),n(s)):C("El usuario no est\xe1 activo"):C("Correo y/o contrase\xf1a incorrecta");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){b(Object(N.a)(Object(N.a)({},i),{},Object(g.a)({},e.target.name,e.target.value)))};return!c&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"FormCard",children:[Object(d.jsx)("h3",{children:"INGRESO DE USUARIO AUTORIZADO"}),Object(d.jsxs)("form",{onSubmit:v,children:[Object(d.jsx)("input",{type:"email",name:"email",placeholder:"Correo",value:i.email,onChange:y,required:!0}),Object(d.jsx)("input",{type:"password",name:"pass",placeholder:"Contrase\xf1a",value:i.pass,onChange:y,required:!0}),Object(d.jsx)("input",{type:"submit",value:"INICIAR SESI\xd3N"})]}),""!==x&&Object(d.jsx)(k,{msg:x,btnCloseClick:function(){p("")}})]})})}var S=function(e){var t=e.text,c=e.onClick,n=e.type,s=void 0===n?"button":n;return Object(d.jsx)("button",{type:s,className:"Btn Btn-accept",onClick:c,style:{color:"white",backgroundColor:"rgb(0, 187, 0)"},children:t})},w=function(e){var t=e.text,c=e.onClick,n=e.type,s=void 0===n?"button":n;return Object(d.jsx)("button",{type:s,className:"Btn",onClick:c,style:{color:"white",backgroundColor:"dodgerblue"},children:t})},A=function(e){var t=e.text,c=e.onClick,n=e.type,s=void 0===n?"button":n;return Object(d.jsx)("button",{type:s,className:"Btn",onClick:c,style:{backgroundColor:"salmon"},children:t})},E=function(e){var t=e.text,c=e.onClick;return Object(d.jsx)("button",{className:"Btn Btn-secundary",onClick:c,children:t})},D=(c(27),function(e){var t=e.isShowModal,c=e.subject,n=e.btnDeleteClick,s=e.btnCancelClick;return Object(d.jsx)("div",{className:t?"Modal-delete active":"Modal-delete",children:Object(d.jsxs)("div",{className:"Modal-card",children:[Object(d.jsx)("h3",{children:"Eliminar"}),Object(d.jsx)("p",{children:c}),Object(d.jsxs)("div",{className:"Modal-actions",children:[Object(d.jsx)(A,{text:"Eliminar",onClick:n}),Object(d.jsx)(E,{text:"Cancelar",onClick:s})]})]})})}),I=(c(28),function(e){var t=e.isShowModal,c=e.subject,n=e.btnCloseClick;return Object(d.jsx)("div",{className:t?"Modal-information active":"Modal-information",children:Object(d.jsxs)("div",{className:"Modal-card",children:[Object(d.jsx)("h3",{children:"Eliminar"}),Object(d.jsx)("p",{children:c}),Object(d.jsx)("div",{className:"Modal-actions",children:Object(d.jsx)(E,{text:"Cerrar",onClick:n})})]})})});function F(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchDelete,n=e.userSession,s=Object(u.useState)([]),i=Object(j.a)(s,2),b=i[0],O=i[1],m=Object(u.useState)({isShowModal:!1,id:-1}),p=Object(j.a)(m,2),f=p[0],C=p[1],v=Object(u.useState)(!1),g=Object(j.a)(v,2),N=g[0],k=g[1],y=Object(a.f)();Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/user.php?fn=getAllUsers",n.token);case 2:null!==(c=e.sent)&&O(c.users);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&0===n.id?function(){e.apply(this,arguments)}():y("/not-found")}),[t,n,f,y]);var E=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/user.php?fn=deleteUser",{id:f.id},n.token);case 2:null!==e.sent&&C({isShowModal:!1,id:-1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n&&Object(d.jsxs)("div",{className:"Wrapper-flex",children:[Object(d.jsxs)("table",{className:"Table",children:[Object(d.jsx)("caption",{children:Object(d.jsx)("h2",{children:"Lista de usuarios"})}),Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{colSpan:4}),Object(d.jsx)("td",{children:Object(d.jsx)(r.b,{to:"/user-insert",className:"Table-link-add",style:{textDecoration:"none"},children:Object(d.jsx)(S,{text:"Nuevo"})})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Usuario"}),Object(d.jsx)("th",{children:"Correo"}),Object(d.jsx)("th",{children:"Administrador"}),Object(d.jsx)("th",{children:"Activo"})]})]}),Object(d.jsx)("tbody",{children:b.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.userName}),Object(d.jsx)("td",{children:e.email}),Object(d.jsx)("td",{className:"Table-cell-center",children:e.isAdmin&&Object(d.jsx)(x.a,{className:"Table-icon"})}),Object(d.jsx)("td",{className:"Table-cell-center",children:e.isActive&&Object(d.jsx)(x.a,{className:"Table-icon"})}),Object(d.jsxs)("td",{children:[Object(d.jsx)(w,{text:"Modificar",onClick:function(){return y("/user-update/".concat(e.id))}}),Object(d.jsx)(A,{text:"Eliminar",onClick:function(){var t;0!==(t=e.id)?C({isShowModal:!0,id:t}):k(!0)}})]})]},e.id)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{colSpan:5,children:[b.length," usuarios"]})})})]}),Object(d.jsx)(D,{isShowModal:f.isShowModal,subject:"\xbfEst\xe1s segur@ de eliminar el usuario?",btnDeleteClick:E,btnCancelClick:function(){C({isShowModal:!1,id:-1})}}),Object(d.jsx)(I,{isShowModal:N,subject:"El usuario no puede ser eliminado porque es el super-admin",btnCloseClick:function(){k(!1)}})]})}c(29);function M(e){var t=e.id,c=Object(u.useContext)(h),n=c.fetchGet,s=c.fetchPost,r=c.fetchPut,i=c.userSession,b=Object(u.useState)({id:-1,userName:"",email:"",isAdmin:!1,isActive:!0,pass:"",confirm:""}),O=Object(j.a)(b,2),m=O[0],x=O[1],p=Object(u.useState)(!1),f=Object(j.a)(p,2),C=f[0],v=f[1],y=Object(u.useState)(""),S=Object(j.a)(y,2),A=S[0],D=S[1],I=Object(a.f)();Object(u.useEffect)((function(){function e(){return e=Object(o.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/user.php?fn=getUser&id="+t,i.token);case 2:null!==(c=e.sent)&&((c=c.user).pass="",c.confirm="",x(c));case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return i?t?function(t){e.apply(this,arguments)}(t):v(!0):I("/not-found"),function(){}}),[t,i,A,n,I]);var F=function(e){var t=e.target,c=t.name,n=t.value;x(Object(N.a)(Object(N.a)({},m),{},Object(g.a)({},c,"isAdmin"!==c&&"isActive"!==c?n:e.target.checked)))},M=function(){var e=Object(o.a)(l.a.mark((function e(c){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,n("/user.php?fn=isExistsEmail&email=".concat(m.email,"&id=").concat(m.id),i.token);case 3:if(null===(a=e.sent)){e.next=23;break}if(a.isExistsEmail){e.next=22;break}if(m.pass!==m.confirm){e.next=19;break}if(!t){e.next=13;break}return e.next=10,r("/user.php?fn=updateUser",m,i.token);case 10:a=e.sent,e.next=16;break;case 13:return e.next=15,s("/user.php?fn=insertUser",m,i.token);case 15:a=e.sent;case 16:I("/users"),e.next=20;break;case 19:D("La contrase\xf1a y su confirmaci\xf3n son diferentes");case 20:e.next=23;break;case 22:D("El correo ya existe");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i&&Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsx)("h4",{children:t?"Modificando usuario":"Agregando usuario"}),Object(d.jsxs)("form",{className:"Form-user",onSubmit:M,children:[Object(d.jsx)("label",{htmlFor:"userName",children:"Usuario"}),Object(d.jsx)("input",{type:"text",id:"userName",name:"userName",value:m.userName,onChange:F,autoFocus:!0,required:!0}),Object(d.jsx)("label",{htmlFor:"email",children:"Correo"}),Object(d.jsx)("input",{type:"email",id:"email",name:"email",value:m.email,onChange:F,required:!0}),Object(d.jsx)("label",{htmlFor:"isAdmin",children:"Administrador"}),Object(d.jsx)("input",{type:"checkbox",id:"isAdmin",name:"isAdmin",checked:m.isAdmin,onChange:F,disabled:0===m.id}),Object(d.jsx)("label",{htmlFor:"isActive",children:"Activo"}),Object(d.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:m.isActive,onChange:F,disabled:0===m.id}),t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{htmlFor:"password",children:"Cambiar contrase\xf1a"}),Object(d.jsx)("input",{type:"checkbox",id:"isShowPass",onChange:function(e){v(e.target.checked)}})]}),C&&Object(d.jsxs)("div",{className:"Form-user-pair-pass",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(d.jsx)("input",{type:"password",name:"pass",value:m.pass,onChange:F,required:t||C})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"confirm",children:"Confirmar"}),Object(d.jsx)("input",{type:"password",name:"confirm",value:m.confirm,onChange:F,required:t||C})]})]}),Object(d.jsxs)("div",{className:"Form-user-actions",children:[Object(d.jsx)(w,{text:"Guardar",type:"submit"}),Object(d.jsx)(E,{text:"Cancelar",onClick:function(){return I("/users")}})]}),""!==A&&Object(d.jsx)(k,{msg:A,btnCloseClick:function(){D("")}})]})]})}function T(e){var t=e.fetchPost;return Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsx)(M,{fetchPost:t})})}function P(){var e=Object(u.useContext)(h).userSession,t=Object(a.f)(),c=Object(a.g)();return Object(u.useEffect)((function(){return e?window.history.replaceState(null,"","/user-update"):t("/not-found"),function(){}}),[t,e]),e&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsx)(M,{id:c.id})})}function R(){var e=Object(u.useContext)(h),t=e.userSession,c=e.fetchPost,n=Object(a.f)(),s=Object(u.useState)({current:"",pass:"",confirm:"",isPassChanged:!1}),r=Object(j.a)(s,2),i=r[0],b=r[1],O=Object(u.useState)(""),m=Object(j.a)(O,2),x=m[0],p=m[1];Object(u.useEffect)((function(){t||n("/not-found")}));var f=function(e){p(e)},C=function(){var e=Object(o.a)(l.a.mark((function e(n){var s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c("user.php?fn=isPassOk",{pass:i.current,id:t.id},t.token);case 3:if(s=e.sent,null===(r=JSON.parse(s))){e.next=20;break}if(p(""),!r.isPassOk){e.next=19;break}if(i.pass!==i.confirm){e.next=16;break}return e.next=11,c("user.php?fn=setUserPass",{pass:i.pass,id:t.id},t.token);case 11:s=e.sent,null!==(r=JSON.parse(s))&&r.isPassChanged&&(b({current:"",pass:"",confirm:"",isPassChanged:!0}),p("Contrase\xf1a ha sido actualizada")),e.next=17;break;case 16:f("Nueva contrase\xf1a y su confirmaci\xf3n son diferentes");case 17:e.next=20;break;case 19:f("Contrase\xf1a actual incorrecta");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){b(Object(N.a)(Object(N.a)({},i),{},Object(g.a)({},e.target.name,e.target.value)))};return t&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"FormCard",children:[Object(d.jsx)("h3",{children:"CAMBIAR CONTRASE\xd1A DE USUARIO"}),!i.isPassChanged&&Object(d.jsxs)("form",{onSubmit:C,children:[Object(d.jsx)("input",{type:"password",name:"current",placeholder:"Contrase\xf1a actual",onChange:v,required:!0}),Object(d.jsx)("input",{type:"password",name:"pass",placeholder:"Nueva contrase\xf1a",onChange:v,required:!0}),Object(d.jsx)("input",{type:"password",name:"confirm",placeholder:"Confirmar nueva contrase\xf1a",onChange:v,required:!0}),Object(d.jsx)("input",{type:"submit",value:"CAMBIAR",style:{backgroundColor:"dodgerblue",borderRadius:"5px"}})]}),""!==x&&Object(d.jsx)(k,{msg:x,btnCloseClick:function(){p("")},isSuccess:i.isPassChanged})]})})}function q(){var e=Object(u.useContext)(h),t=e.fetchPostInput,c=e.customerSession,n=e.setCustomerSession,s=e.isReturnToCart,i=e.setIsReturnToCart,b=Object(u.useState)({email:"",pass:""}),O=Object(j.a)(b,2),m=O[0],x=O[1],p=Object(u.useState)(""),f=Object(j.a)(p,2),C=f[0],v=f[1],y=Object(a.f)();Object(u.useEffect)((function(){return c&&y("/"),function(){}}),[c,y]);var S=function(e){x(Object(N.a)(Object(N.a)({},m),{},Object(g.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(o.a)(l.a.mark((function e(c){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,t("/customer_authorized.php?fn=getDataCustomerFromPass",m);case 3:r=e.sent,x({email:"",pass:""}),r.isAuth?(r=r.customer).isActive?(window.sessionStorage.clear(),window.sessionStorage.setItem("customer",JSON.stringify(r)),n(r),s?(i(!1),y("/carrito")):y("/")):v("Tu cuenta no est\xe1 activada"):v("Correo y/o contrase\xf1a incorrecta"),x(Object(N.a)(Object(N.a)({},m),{},{pass:""}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!c&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"FormCard",children:[Object(d.jsx)("h3",{children:"INICIA SESI\xd3N"}),Object(d.jsxs)("form",{onSubmit:w,children:[Object(d.jsx)("input",{type:"email",name:"email",value:m.email,onChange:S,placeholder:"Correo",required:!0}),Object(d.jsx)("input",{type:"password",name:"pass",value:m.pass,onChange:S,placeholder:"Contrase\xf1a",required:!0}),Object(d.jsx)(r.b,{to:"/customer-pass-lost",children:Object(d.jsx)("span",{children:"Olvid\xe9 mi contrase\xf1a"})}),Object(d.jsx)("input",{type:"submit",value:"INICIAR SESI\xd3N"})]}),Object(d.jsxs)("p",{children:["No tienes una cuenta? ",Object(d.jsx)(r.b,{to:"/customer-register",children:"Crear una cuenta"})]}),""!==C&&Object(d.jsx)(k,{msg:C,btnCloseClick:function(){v("")}})]})})}var H=function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchDelete,n=e.userSession,s=Object(u.useState)([]),i=Object(j.a)(s,2),b=i[0],O=i[1],m=Object(u.useState)({isShowModal:!1,id:-1}),p=Object(j.a)(m,2),f=p[0],C=p[1],v=Object(a.f)();Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/category.php?fn=getAllCategories",n.token);case 2:null!==(c=e.sent)&&O(c.categories);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?function(){e.apply(this,arguments)}():v("/not-found"),function(){}}),[t,v,n,f]);var g=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/category.php?fn=deleteCategory",{id:f.id},n.token);case 2:null!==e.sent&&C({isShowModal:!1,id:-1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n&&Object(d.jsxs)("div",{className:"Wrapper-flex",children:[Object(d.jsxs)("table",{className:"Table",children:[Object(d.jsx)("caption",{children:Object(d.jsx)("h2",{children:"Categor\xedas"})}),Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{colSpan:2}),Object(d.jsx)("td",{children:Object(d.jsx)(r.b,{to:"/category-insert",className:"Table-link-add",style:{textDecoration:"none"},children:Object(d.jsx)(S,{text:"Nueva"})})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Descripci\xf3n"}),Object(d.jsx)("th",{children:"Disponible"})]})]}),Object(d.jsx)("tbody",{children:b.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.categoryName}),Object(d.jsx)("td",{className:"Table-cell-center",children:e.isAvailable&&Object(d.jsx)(x.a,{className:"Table-icon"})}),n.isAdmin&&Object(d.jsxs)("td",{children:[Object(d.jsx)(w,{text:"Modificar",onClick:function(){return v("/category-update/".concat(e.id))}}),Object(d.jsx)(A,{text:"Eliminar",onClick:function(){return t=e.id,void C({isShowModal:!0,id:t});var t}})]})]},e.id)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{})})]}),Object(d.jsx)(D,{isShowModal:f.isShowModal,subject:"\xbfEst\xe1s segur@ de eliminar la categor\xeda y todos sus productos?",btnDeleteClick:g,btnCancelClick:function(){C({isShowModal:!1,id:-1})}})]})};function L(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchPost,n=e.fetchPut,s=e.userSession,r=Object(u.useState)({id:-1,categoryName:"",isAvailable:!0}),i=Object(j.a)(r,2),b=i[0],O=i[1],m=Object(u.useState)(""),x=Object(j.a)(m,2),p=x[0],f=x[1],C=Object(a.g)().id,v=Object(a.f)();Object(u.useEffect)((function(){function e(){return e=Object(o.a)(l.a.mark((function e(c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/category.php?fn=getCategory&id="+c,s.token);case 2:null!==(n=e.sent)&&O(n.category);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}s?C&&function(t){e.apply(this,arguments)}(C):v("/not-found")}),[C,t,v,s,p]);var y=function(e){var t=e.target,c=t.name,n=t.value;O(Object(N.a)(Object(N.a)({},b),{},Object(g.a)({},c,"isAvailable"!==c?n:e.target.checked)))},S=function(){var e=Object(o.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t("/category.php?fn=isExistsCategory&categoryName=".concat(b.categoryName,"&id=").concat(b.id),s.token);case 3:if(e.sent.isExistsCategory){e.next=17;break}if(!(b.id>-1)){e.next=11;break}return e.next=8,n("/category.php?fn=updateCategory",b,s.token);case 8:e.sent,e.next=14;break;case 11:return e.next=13,c("/category.php?fn=insertCategory",b,s.token);case 13:e.sent;case 14:v("/categories"),e.next=18;break;case 17:f("La categoria ya existe");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsx)("h4",{children:C?"Modificando categor\xeda":"Agregando categor\xeda"}),Object(d.jsxs)("form",{className:"Form-user",onSubmit:S,children:[Object(d.jsx)("label",{htmlFor:"categoryName",children:"Descripci\xf3n"}),Object(d.jsx)("input",{type:"text",id:"categoryName",name:"categoryName",value:b.categoryName,onChange:y,autoFocus:!0,required:!0}),Object(d.jsx)("label",{htmlFor:"isAvailable",children:"Disponible"}),Object(d.jsx)("input",{type:"checkbox",id:"isAvailable",name:"isAvailable",checked:b.isAvailable,onChange:y}),Object(d.jsxs)("div",{className:"Form-user-actions",children:[Object(d.jsx)(w,{text:"Guardar",type:"submit"}),Object(d.jsx)(E,{text:"Cancelar",onClick:function(){return v("/categories")}})]}),""!==p&&Object(d.jsx)(k,{msg:p,btnCloseClick:function(){f("")}})]})]})})}c(30);var G=function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchDelete,n=e.userSession,s=Object(u.useState)([]),i=Object(j.a)(s,2),b=i[0],O=i[1],m=Object(u.useState)(null),p=Object(j.a)(m,2),f=p[0],C=p[1],v=Object(u.useState)({isShowModal:!1,id:-1}),g=Object(j.a)(v,2),N=g[0],k=g[1],y=Object(u.useState)(""),E=Object(j.a)(y,2),I=E[0],F=E[1],M=Object(a.f)(),T=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/article.php?fn=getAllArticles&txtSearch="+I,n.token);case 2:null!==(c=e.sent)&&O(c.articles);case 4:case"end":return e.stop()}}),e)}))),[t,I,n]);Object(u.useEffect)((function(){return n?T():M("/not-found"),function(){}}),[T,M,n,N]);var P=function(){var e=Object(o.a)(l.a.mark((function e(c){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/article.php?fn=getArticle&id="+c,n.token);case 2:null!==(s=e.sent)&&C(s.article);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/article.php?fn=deleteArticle",{id:N.id},n.token);case 2:null!==e.sent&&(C(null),k({isShowModal:!1,id:-1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){if("TD"===e.target.tagName){var t=document.getElementsByClassName("active")[0];t&&t.classList.remove("active");var c=e.target.parentElement.id;(t=document.getElementById(c)).classList.add("active"),P(c)}};return n&&Object(d.jsxs)("div",{className:"Wrapper-flex",children:[Object(d.jsxs)("table",{className:"Table",children:[Object(d.jsx)("caption",{children:Object(d.jsx)("h2",{children:"Art\xedculos"})}),Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{colSpan:3,children:Object(d.jsx)("input",{type:"search",onChange:function(e){F(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&T()},placeholder:"Buscar...",autoFocus:!0})}),Object(d.jsx)("td",{colSpan:2,children:Object(d.jsx)(r.b,{to:"/article-insert",children:Object(d.jsx)(S,{text:"Nuevo"})})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Titulo"}),Object(d.jsx)("th",{children:"Categor\xeda"}),Object(d.jsx)("th",{children:"Precio"}),Object(d.jsx)("th",{children:"Disponible"})]})]}),Object(d.jsx)("tbody",{children:b.map((function(e){return Object(d.jsxs)("tr",{id:e.id,onClick:q,children:[Object(d.jsx)("td",{children:e.articleName}),Object(d.jsx)("td",{children:e.categoryName}),Object(d.jsxs)("td",{className:"Table-cell-end",children:["$ ",e.price]}),Object(d.jsx)("td",{className:"Table-cell-center",children:e.isAvailable&&Object(d.jsx)(x.a,{className:"Table-icon"})}),Object(d.jsx)("td",{children:n.isAdmin&&Object(d.jsx)(A,{text:"Eliminar",onClick:function(){return t=e.id,void k({isShowModal:!0,id:t});var t}})})]},e.id)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{className:"Table-cell-center",colSpan:4,children:[b.length," art\xedculos"]})})})]}),Object(d.jsx)("div",{className:"Card",children:Object(d.jsx)("div",{className:"Card-article-border",children:null!=f&&Object(d.jsxs)("div",{className:"Card-article-container",children:[Object(d.jsxs)("div",{className:"Card-article-data",children:[Object(d.jsx)("img",{src:f.imgPath,alt:"",width:"100"}),Object(d.jsx)("h5",{children:"Categor\xeda"}),Object(d.jsx)("pre",{children:f.categoryName}),Object(d.jsx)("h5",{children:"Titulo"}),Object(d.jsx)("pre",{children:f.articleName}),Object(d.jsx)("h5",{children:"Descripci\xf3n"}),Object(d.jsx)("pre",{children:f.description}),Object(d.jsx)("h5",{children:"Precio"}),Object(d.jsxs)("pre",{children:["$ ",f.price]}),Object(d.jsx)("h5",{children:"Existencia"}),Object(d.jsx)("pre",{children:f.stock})]}),n.isAdmin&&Object(d.jsx)(w,{text:"Modificar",style:{display:"block"},onClick:function(){return M("/article-update/".concat(f.id))}})]})})}),Object(d.jsx)(D,{isShowModal:N.isShowModal,subject:"\xbfEst\xe1s segur@ de eliminar el art\xedculo?",btnDeleteClick:R,btnCancelClick:function(){k({isShowModal:!1,id:-1})}})]})},B=function(){var e,t,c=Object(u.useContext)(h),n=c.fetchGet,s=c.fetchPost,r=c.fetchPut,i=c.userSession,b=Object(a.g)(),O=null!==(e=b.id)&&void 0!==e?e:-1,m=Object(u.useState)([]),x=Object(j.a)(m,2),p=x[0],f=x[1],C=Object(u.useState)({id:null!==(t=b.id)&&void 0!==t?t:-1,imgPath:"http://192.168.0.27/react_php-catalog/backend/img/noImage.png",imgBase64:"",idCategory:-1,articleName:"",description:"",price:"",stock:"",isAvailable:!0}),v=Object(j.a)(C,2),y=v[0],S=v[1],A=Object(u.useState)(""),D=Object(j.a)(A,2),I=D[0],F=D[1],M=Object(a.f)(),T=function(e){var t=e.target,c=t.name,n=t.value;S(Object(N.a)(Object(N.a)({},y),{},Object(g.a)({},c,"isAvailable"!==c?n:e.target.checked)))},P=function(){var e=Object(o.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n("/article.php?fn=isExistsArticle&articleName=".concat(y.articleName.trim(),"&id=").concat(y.id),i.token);case 3:if(null===(c=e.sent)){e.next=17;break}if(c.isExistsArticle){e.next=16;break}if(-1!==y.id){e.next=12;break}return e.next=9,s("/article.php?fn=insertArticle",y,i.token);case 9:c=e.sent,e.next=15;break;case 12:return e.next=14,r("/article.php?fn=updateArticle",y,i.token);case 14:c=e.sent;case 15:M("/articles");case 16:F("El art\xedculo ya existe");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/category.php?fn=getAllCategories",i.token);case 2:if(null===(t=e.sent)){e.next=11;break}if(t=t.categories,f(t),!(y.id>-1)){e.next=11;break}return e.next=9,n("/article.php?fn=getArticle&id="+y.id,i.token);case 9:null!==(t=e.sent)&&((t=t.article).imgBase64="",S(t));case 11:case"end":return e.stop()}}),e)}))),[n,i,y.id]);return Object(u.useEffect)((function(){return i?R():M("/not-found"),function(){}}),[i,R,M]),i&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsxs)("h4",{children:[-1===O?"Agregando":"Modificando"," art\xedculo"]}),Object(d.jsx)("div",{className:"Card-img-container",children:Object(d.jsx)("img",{src:y.imgPath,id:"imgArticle",alt:"Art\xedculo",style:{width:"100%",height:"100%"}})}),Object(d.jsxs)("form",{className:"Form",onSubmit:P,children:[Object(d.jsx)("input",{type:"file",name:"img",id:"img",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(FileReader&&t){var c=new FileReader;c.onload=function(){document.getElementById("imgArticle").src=c.result,S(Object(N.a)(Object(N.a)({},y),{},{imgBase64:c.result}))},c.readAsDataURL(t)}}}),Object(d.jsx)("label",{htmlFor:"idCategory",children:"Categor\xeda"}),Object(d.jsx)("select",{name:"idCategory",id:"idCategory",value:y.idCategory,onChange:T,required:!0,children:p.map((function(e){return Object(d.jsx)("option",{value:e.id,children:e.categoryName},e.id)}))}),Object(d.jsx)("label",{htmlFor:"articleName",children:"Titulo"}),Object(d.jsx)("input",{type:"text",id:"articleName",name:"articleName",value:y.articleName,onChange:T,autoFocus:!0,required:!0}),Object(d.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),Object(d.jsx)("textarea",{name:"description",id:"description",value:y.description,onChange:T}),Object(d.jsxs)("div",{className:"Form-number-pair",children:[Object(d.jsx)("label",{htmlFor:"price",children:"Precio"}),Object(d.jsx)("input",{type:"number",name:"price",id:"price",value:y.price,onChange:T,required:!0}),Object(d.jsx)("label",{htmlFor:"stock",style:{marginLeft:"20px"},children:"Existencia"}),Object(d.jsx)("input",{type:"number",name:"stock",id:"stock",value:y.stock,onChange:T,required:!0})]}),Object(d.jsx)("label",{htmlFor:"isAvailable",children:"Disponible"}),Object(d.jsx)("input",{type:"checkbox",id:"isAvailable",name:"isAvailable",checked:y.isAvailable,onChange:T}),Object(d.jsxs)("div",{className:"Form-user-actions",children:[Object(d.jsx)(w,{text:"Guardar",type:"submit"}),Object(d.jsx)(E,{text:"Cancelar",onClick:function(){return M("/articles")}})]}),""!==I&&Object(d.jsx)(k,{msg:I,btnCloseClick:function(){F("")}})]})]})})};c(31);function U(){var e=Object(u.useContext)(h).fetchGet,t=Object(a.g)(),c=Object(a.f)(),n=Object(u.useState)([]),s=Object(j.a)(n,2),r=s[0],i=s[1];Object(u.useEffect)((function(){function c(){return(c=Object(o.a)(l.a.mark((function c(){var n;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if("categoria"!==t.search){c.next=6;break}return c.next=3,e("/index.php?fn=getAllArticlesFromCategoryName&categoryName="+t.txtSearch);case 3:n=c.sent,c.next=9;break;case 6:return c.next=8,e("/index.php?fn=getAllArticlesFromTxt&txtSearch="+t.txtSearch);case 8:n=c.sent;case 9:null!==n&&i(n.articles);case 10:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){}}),[t,e]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:t.txtSearch}),Object(d.jsx)("div",{className:"Grid",children:r.map((function(e){return e.isAvailable&&Object(d.jsxs)("div",{className:"Product-card",children:[0===e.stock&&Object(d.jsx)("span",{children:"AGOTADO"}),Object(d.jsx)("img",{src:e.imgPath,alt:e.title,onClick:function(){return t=e.id,void c("/producto-detalle/"+t);var t},width:"220",height:"250"}),Object(d.jsx)("p",{children:e.articleName}),Object(d.jsxs)("p",{className:"Product-price",children:["$ ",e.price]})]},e.id)}))})]})}var W=c(17),J=(c(32),function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.userSession,n=e.articlesCart,s=e.setArticlesCart,r=Object(a.g)(),i=Object(a.f)(),b=Object(u.useState)({}),O=Object(j.a)(b,2),m=O[0],p=O[1],f=Object(u.useState)(1),C=Object(j.a)(f,2),v=C[0],g=C[1],N=Object(u.useState)(""),y=Object(j.a)(N,2),S=y[0],w=y[1];Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/index.php?fn=getArticle&id="+r.id);case 2:null!==(c=e.sent)&&p(c.article);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[r,t]),Object(u.useEffect)((function(){return window.localStorage.setItem("cart",JSON.stringify(n)),function(){}}),[n]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"Detail-top",children:Object(d.jsx)(x.c,{className:"Detail-icon",onClick:function(){i(-1)}})}),Object(d.jsxs)("div",{className:"Wrapper-flex",children:[Object(d.jsx)("div",{className:"Card Detail-card",children:Object(d.jsx)("div",{className:"Detail-container Detail-zoom",children:Object(d.jsx)("img",{src:m.imgPath,alt:""})})}),Object(d.jsx)("div",{className:"Card Detail-card",children:Object(d.jsxs)("div",{className:"Detail-container Detail-data",children:[Object(d.jsx)("h4",{children:"DAMAX BOUTIQUE"}),Object(d.jsx)("p",{className:"Detail-title",children:m.articleName}),Object(d.jsxs)("p",{className:"Detail-price",children:["$ ",m.price]}),Object(d.jsxs)("div",{className:"Detail-qty",children:[Object(d.jsx)(x.g,{className:"Detail-icon",onClick:function(){v>=2&&g(v-1)}}),Object(d.jsx)("span",{children:v}),Object(d.jsx)(x.h,{className:"Detail-icon",onClick:function(){g(v+1)}})]}),Object(d.jsx)("div",{className:"Detail-stock",children:Object(d.jsx)("span",{children:m.stock>0?"Solo restan: "+m.stock:"AGOTADO"})}),Object(d.jsx)("p",{className:"Detail-title",children:"Descripci\xf3n"}),Object(d.jsx)("pre",{className:"Detail-description",children:m.description}),!c&&m.stock>=v&&Object(d.jsx)("button",{className:"Detail-btn-cart",onClick:function(){m.qty=v;var e=n.findIndex((function(e){return e.id===m.id}));-1===e?s([].concat(Object(W.a)(n),[m])):n[e].qty+=v;w("El art\xedculo ha sido agregado al carrito")},children:"AGREGAR AL CARRITO"}),""!==S&&Object(d.jsx)(k,{msg:S,btnCloseClick:function(){w("")},isSuccess:!0})]})})]})]})}),z=(c(33),function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchDelete,n=e.userSession,s=Object(u.useState)([]),i=Object(j.a)(s,2),b=i[0],O=i[1],m=Object(u.useState)(null),p=Object(j.a)(m,2),f=p[0],C=p[1],v=Object(u.useState)({isShowModal:!1,id:-1}),g=Object(j.a)(v,2),N=g[0],k=g[1],y=Object(u.useState)(""),E=Object(j.a)(y,2),I=E[0],F=E[1],M=Object(a.f)(),T=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer.php?fn=getAllCustomers&txtSearch="+I,n.token);case 2:null!==(c=e.sent)&&O(c.customers);case 4:case"end":return e.stop()}}),e)}))),[t,I,n]);Object(u.useEffect)((function(){return n?T():M("/not-found"),function(){}}),[T,M,n,N]);var P=function(){var e=Object(o.a)(l.a.mark((function e(c){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer.php?fn=getCustomer&id="+c,n.token);case 2:null!==(s=e.sent)&&C(s.customer);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/customer.php?fn=deleteCustomer",{id:N.id},n.token);case 2:null!==e.sent&&(C(null),k({isShowModal:!1,id:-1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){if("TD"===e.target.tagName){var t=document.getElementsByClassName("active")[0];t&&t.classList.remove("active");var c=e.target.parentElement.id;(t=document.getElementById(c)).classList.add("active"),P(c)}};return n&&Object(d.jsxs)("div",{className:"Wrapper-flex",children:[Object(d.jsxs)("table",{className:"Table",children:[Object(d.jsx)("caption",{children:Object(d.jsx)("h2",{children:"Clientes"})}),Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{colSpan:3,children:Object(d.jsx)("input",{type:"search",onChange:function(e){F(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&T()},placeholder:"Buscar...",autoFocus:!0})}),Object(d.jsx)("td",{colSpan:2,children:Object(d.jsx)(r.b,{to:"/customer-insert",children:Object(d.jsx)(S,{text:"Nuevo"})})})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Correo"}),Object(d.jsx)("th",{children:"Nombre"}),Object(d.jsx)("th",{children:"Tel\xe9fono"}),Object(d.jsx)("th",{children:"Activo"})]})]}),Object(d.jsx)("tbody",{children:b.map((function(e){return Object(d.jsxs)("tr",{id:e.id,onClick:q,children:[Object(d.jsx)("td",{children:e.email}),Object(d.jsx)("td",{children:e.fullname}),Object(d.jsx)("td",{children:e.phone}),Object(d.jsx)("td",{className:"Table-cell-center",children:e.isActive&&Object(d.jsx)(x.a,{className:"Table-icon"})}),Object(d.jsx)("td",{children:n.isAdmin&&Object(d.jsx)(A,{text:"Eliminar",onClick:function(){return t=e.id,void k({isShowModal:!0,id:t});var t}})})]},e.id)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{className:"Table-cell-center",colSpan:4,children:[b.length," ",1===b.length?"cliente":"clientes"]})})})]}),Object(d.jsx)("div",{className:"Card",children:Object(d.jsx)("div",{className:"Card-customer-border",children:null!=f&&Object(d.jsxs)("div",{className:"Card-customer-container",children:[Object(d.jsxs)("div",{className:"Card-customer-data",children:[Object(d.jsx)("h5",{children:"Correo"}),Object(d.jsx)("pre",{children:f.email}),Object(d.jsx)("h5",{children:"Nombre"}),Object(d.jsx)("pre",{children:f.fullname}),Object(d.jsx)("h5",{children:"Tel\xe9fono"}),Object(d.jsx)("pre",{children:f.phone}),Object(d.jsx)("h5",{children:"Calle y n\xfamero"}),Object(d.jsx)("pre",{children:f.streetAndNumber}),Object(d.jsx)("h5",{children:"Colonia"}),Object(d.jsx)("pre",{children:f.suburb}),Object(d.jsx)("h5",{children:"CP"}),Object(d.jsx)("pre",{children:f.cp}),Object(d.jsx)("h5",{children:"Ciudad"}),Object(d.jsx)("pre",{children:f.town})]}),n.isAdmin&&Object(d.jsx)(w,{text:"Modificar",style:{display:"block"},onClick:function(){return M("/customer-update/".concat(f.id))}})]})})}),Object(d.jsx)(D,{isShowModal:N.isShowModal,subject:"\xbfEst\xe1s segur@ de eliminar al cliente?",btnDeleteClick:R,btnCancelClick:function(){k({isShowModal:!1,id:-1})}})]})}),$=(c(34),function(){var e,t=Object(u.useContext)(h),c=t.fetchGet,n=t.fetchPost,s=t.fetchPut,r=t.userSession,i=Object(a.g)(),b=i.id,O=Object(u.useState)({id:null!==(e=i.id)&&void 0!==e?e:-1,email:"",fullname:"",phone:"",streetAndNumber:"",suburb:"",cp:"",town:"",isActive:!0,pass:"",confirm:""}),m=Object(j.a)(O,2),x=m[0],p=m[1],f=Object(u.useState)(!1),C=Object(j.a)(f,2),v=C[0],y=C[1],S=Object(u.useState)(""),A=Object(j.a)(S,2),D=A[0],I=A[1],F=Object(a.f)(),M=function(e){var t=e.target,c=t.name,n=t.value;p(Object(N.a)(Object(N.a)({},x),{},Object(g.a)({},c,"isActive"!==c?n:e.target.checked)))},T=function(){var e=Object(o.a)(l.a.mark((function e(t){var a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c("/customer.php?fn=isExistsCustomer&email=".concat(x.email.trim(),"&id=").concat(x.id),r.token);case 3:if(null===(a=e.sent)){e.next=22;break}if(a.isExistsCustomer){e.next=21;break}if(i=!1,v?x.pass===x.confirm?i=!0:(p(Object(N.a)(Object(N.a)({},x),{},{pass:"",confirm:""})),I("Contrase\xf1a y confirmaci\xf3n son diferentes")):i=!0,!i){e.next=19;break}if(-1!==x.id){e.next=15;break}return e.next=12,n("/customer.php?fn=insertCustomer&isAutoRegister=false",x,r.token);case 12:a=e.sent,e.next=18;break;case 15:return e.next=17,s("/customer.php?fn=updateCustomer",x,r.token);case 17:a=e.sent;case 18:F("/customers");case 19:e.next=22;break;case 21:I("El cliente ya existe");case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x.id>-1)){e.next=5;break}return e.next=3,c("/customer.php?fn=getCustomer&id="+x.id,r.token);case 3:null!==(t=e.sent)&&((t=t.customer).pass="",t.confirm="",p(t));case 5:case"end":return e.stop()}}),e)}))),[c,r,x]);Object(u.useEffect)((function(){return r?b?P():y(!0):F("/not-found"),function(){}}),[P,b,r,F]);return r&&Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsxs)("h4",{children:[void 0===b?"Agregando":"Modificando"," cliente"]}),Object(d.jsxs)("form",{className:"Form",onSubmit:T,children:[Object(d.jsx)("label",{htmlFor:"email",children:"Correo"}),Object(d.jsx)("input",{type:"text",id:"email",name:"email",value:x.email,onChange:M,autoFocus:!0,required:!0}),Object(d.jsx)("label",{htmlFor:"fullname",children:"Nombre"}),Object(d.jsx)("input",{type:"text",id:"fullname",name:"fullname",value:x.fullname,onChange:M,required:!0}),Object(d.jsx)("label",{htmlFor:"phone",children:"Tel\xe9fono"}),Object(d.jsx)("input",{type:"text",id:"phone",name:"phone",value:x.phone,onChange:M}),Object(d.jsx)("label",{htmlFor:"streetAndNumber",children:"Calle y n\xfamero"}),Object(d.jsx)("input",{type:"text",id:"streetAndNumber",name:"streetAndNumber",value:x.streetAndNumber,onChange:M}),Object(d.jsxs)("div",{className:"Form-input-pair-inline",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"suburb",children:"Colonia"}),Object(d.jsx)("input",{type:"text",id:"suburb",name:"suburb",value:x.suburb,onChange:M})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"cp",children:"C.P."}),Object(d.jsx)("input",{type:"text",id:"cp",name:"cp",value:x.cp,onChange:M})]})]}),Object(d.jsx)("label",{htmlFor:"town",children:"Municipio"}),Object(d.jsx)("input",{type:"text",id:"town",name:"town",value:x.town,onChange:M}),Object(d.jsx)("label",{htmlFor:"isActive",children:"Activo"}),Object(d.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:x.isActive,onChange:M}),b&&Object(d.jsxs)("div",{className:"Form-customer-check-pass",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Cambiar contrase\xf1a"}),Object(d.jsx)("input",{type:"checkbox",id:"isShowPass",onChange:function(e){y(e.target.checked)}})]}),v&&Object(d.jsxs)("div",{className:"Form-customer-pair-pass",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"password",children:"Contrase\xf1a"}),Object(d.jsx)("input",{type:"password",id:"pass",name:"pass",value:x.pass,onChange:M,required:!0})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"confirm",children:"Confirmar"}),Object(d.jsx)("input",{type:"password",id:"confirm",name:"confirm",value:x.confirm,onChange:M,required:!0})]})]}),Object(d.jsxs)("div",{className:"Form-customer-actions",children:[Object(d.jsx)(w,{text:"Guardar",type:"submit"}),Object(d.jsx)(E,{text:"Cancelar",onClick:function(){return F("/customers")}})]}),""!==D&&Object(d.jsx)(k,{msg:D,btnCloseClick:function(){I("")}})]})]})})}),_=(c(35),function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchPost,n=e.articlesCart,s=e.setArticlesCart,i=e.totalCart,b=e.setTotalCart,O=e.customerSession,m=e.setIsReturnToCart,p=Object(a.f)(),f=Object(u.useState)(""),C=Object(j.a)(f,2),v=C[0],g=C[1],y=Object(u.useState)(-1),S=Object(j.a)(y,2),w=S[0],A=S[1],E="";Object(u.useEffect)((function(){var e=n.reduce((function(e,t){return e+t.qty*t.price}),0);b(e),window.localStorage.setItem("cart",JSON.stringify(n))}),[n,b]);function D(){return D=Object(o.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,n.forEach(function(){var e=Object(o.a)(l.a.mark((function e(a,o){var j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer_authorized.php?fn=isStockComplete&id=".concat(a.id,"&qty=").concat(a.qty),O.token);case 2:if(null===(j=e.sent)){e.next=16;break}if(j.isStockComplete||(r=!1,E=a.articleName),o!==n.length-1){e.next=16;break}if(!r){e.next=15;break}return g(""),e.next=10,c("/customer_authorized.php?fn=insertOrderFromCart&items=".concat(n.length,"&total=").concat(i),n,O.token);case 10:j=e.sent,A(j.idOrder),s([]),e.next=16;break;case 15:g("Existencia insuficiente:\n".concat(E));case 16:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"Cart-title",children:"Carrito"}),Object(d.jsx)("div",{className:"Cart-container",children:Object(d.jsxs)("div",{className:"Cart-table-summary",children:[Object(d.jsxs)("table",{className:"Cart-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{className:"Cart-row Cart-row-delete",children:[Object(d.jsx)("th",{className:"Cart-col-product",children:"Producto"}),Object(d.jsx)("th",{className:"Cart-col-qty",children:"Cantidad"}),Object(d.jsx)("th",{className:"Cart-col-price",children:"Precio"}),Object(d.jsx)("th",{className:"Cart-col-amount",children:"Importe"})]})}),Object(d.jsx)("tbody",{children:n.map((function(e,t){return Object(d.jsxs)("tr",{className:"Cart-row no-title",children:[Object(d.jsxs)("td",{className:"Cart-col-product",children:[Object(d.jsx)("div",{className:"Cart-container-img",children:Object(d.jsx)("img",{src:e.imgPath,alt:e.articleName})}),Object(d.jsx)(r.b,{to:"/productoDetalle/"+e.id,className:"Cart-description",children:e.articleName})]}),Object(d.jsx)("td",{className:"Cart-col-qty",children:Object(d.jsxs)("div",{className:"Cart-qty",children:[Object(d.jsx)(x.g,{className:"Cart-icon",onClick:function(){return function(e){var t=n.findIndex((function(t){return t.id===e}));if(t>-1&&n[t].qty>=2){var c=n.map((function(e){return e===n[t]?Object(N.a)(Object(N.a)({},e),{},{qty:e.qty-1}):e}));s(c)}}(n[t].id)}}),Object(d.jsx)("span",{children:e.qty}),Object(d.jsx)(x.h,{className:"Cart-icon",onClick:function(){return function(e){var t=n.findIndex((function(t){return t.id===e}));if(t>-1){var c=n.map((function(e){return e===n[t]?Object(N.a)(Object(N.a)({},e),{},{qty:e.qty+1}):e}));s(c)}}(n[t].id)}})]})}),Object(d.jsxs)("td",{className:"Cart-col-price",children:["$",new Intl.NumberFormat("es-MX").format(e.price)]}),Object(d.jsxs)("td",{className:"Cart-col-amount",children:["$",new Intl.NumberFormat("es-MX").format(e.qty*e.price),Object(d.jsx)(x.b,{className:"Cart-icon Cart-icon-delete",onClick:function(){return e=n[t].id,void s(n.filter((function(t){return t.id!==e})));var e}})]})]},t)}))})]}),Object(d.jsx)("div",{className:"Cart-summary",children:Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsx)("h3",{children:"RESUMEN"}),Object(d.jsx)("br",{}),-1===w?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("code",{children:[n.length," ",1===n?"art\xedculo":"art\xedculos"]}),Object(d.jsxs)("h4",{children:["Total $",new Intl.NumberFormat("es-MX",{minimumFractionDigits:2}).format(i)]}),n.length>0&&Object(d.jsxs)(d.Fragment,{children:[O?Object(d.jsx)("button",{className:"Cart-btn-order",onClick:function(){return D.apply(this,arguments)},children:"ORDENAR"}):Object(d.jsx)("button",{className:"Cart-btn-order",onClick:function(){m(!0),p("/input")},children:"INICIAR SESI\xd3N PARA ORDENAR"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"Cart-clean-cart",onClick:function(){s([]),b(0)},children:"Limpiar carrito"}),""!==v&&Object(d.jsx)(k,{msg:v,btnCloseClick:function(){g("")}})]})]}):Object(d.jsx)(k,{msg:"\xd3rden enviada con el folio: "+w,btnCloseClick:function(){A(-1)},isSuccess:!0})]})})]})})]})}),X=(c(36),function(){return Object(d.jsxs)("footer",{className:"Footer",children:[Object(d.jsxs)("div",{className:"Footer-wrapper",children:[Object(d.jsx)("div",{className:"Footer-left"}),Object(d.jsx)("div",{className:"Footer-right"})]}),Object(d.jsx)(r.b,{to:"/admin",className:"Link",children:Object(d.jsx)("p",{children:"\xa9DAMAX BOUTIQUE. Todos los derechos reservados."})})]})}),V=(c(37),function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.customerSession,n=Object(u.useState)([]),s=Object(j.a)(n,2),r=s[0],i=s[1],b=Object(u.useState)(null),O=Object(j.a)(b,2),m=O[0],x=O[1],p=Object(u.useState)([]),f=Object(j.a)(p,2),C=f[0],v=f[1],k=Object(u.useState)({firstDate:new Date(Date.now()-25056e5).toLocaleDateString("en-CA"),lastDate:(new Date).toLocaleDateString("en-CA")}),y=Object(j.a)(k,2),S=y[0],w=y[1],A=Object(a.f)(),E=Object(u.useCallback)(function(){var e=Object(o.a)(l.a.mark((function e(c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer_authorized.php?fn=getItemsOrder&idOrder=".concat(c));case 2:null!==(n=e.sent)&&v(n.itemsOrder);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),D=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer_authorized.php?fn=getAllOrders&idCustomer=".concat(c.id,"&firstDate=").concat(S.firstDate,"&lastDate=").concat(S.lastDate),c.token);case 2:null!==(n=e.sent)&&(n=n.orders,i(n),n.length>0&&(x(n[0]),E(n[0].id)));case 4:case"end":return e.stop()}}),e)}))),[t,c,E,S.firstDate,S.lastDate]);function I(e){if("TD"===e.target.tagName){var t=document.getElementsByClassName("active")[0];t&&t.classList.remove("active");var c=parseInt(e.target.parentElement.id),n=r.findIndex((function(e){return e.id===c}));x(r[n]),(t=document.getElementById(c)).classList.add("active"),E(c)}}function F(e){w(Object(N.a)(Object(N.a)({},S),{},Object(g.a)({},e.target.name,e.target.value)))}return Object(u.useEffect)((function(){return c?D():A("/not-found"),function(){}}),[c,A,D]),c&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"MIS PEDIDOS"}),Object(d.jsxs)("div",{className:"OrdersCustomer-table-detail",children:[Object(d.jsxs)("table",{className:"OrdersCustomer-table",children:[Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{colSpan:2,children:[Object(d.jsx)("label",{htmlFor:"firstDate",children:Object(d.jsx)("code",{children:"Desde "})}),Object(d.jsx)("input",{type:"date",name:"firstDate",id:"firstDate",value:S.firstDate,onChange:F,required:!0})]}),Object(d.jsxs)("td",{colSpan:2,children:[Object(d.jsx)("label",{htmlFor:"lastDate",children:Object(d.jsx)("code",{children:"Hasta "})}),Object(d.jsx)("input",{type:"date",name:"lastDate",id:"lastDate",value:S.lastDate,onChange:F,required:!0})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Orden"}),Object(d.jsx)("th",{children:"Fecha"}),Object(d.jsx)("th",{children:"Art\xedculos"}),Object(d.jsx)("th",{children:"Total"}),Object(d.jsx)("th",{children:"Estado"})]})]}),Object(d.jsx)("tbody",{children:r.map((function(e,t){return Object(d.jsxs)("tr",{className:0===t?"active":"",id:e.id,onClick:I,children:[Object(d.jsx)("td",{className:"OrdersCustomer-col-number",children:e.id}),Object(d.jsx)("td",{children:e.created}),Object(d.jsx)("td",{className:"OrdersCustomer-col-number",children:e.items}),Object(d.jsxs)("td",{className:"OrdersCustomer-col-number",children:["$",new Intl.NumberFormat("es-MX",{minimumFractionDigits:2}).format(e.total)]}),Object(d.jsx)("td",{children:Object(d.jsx)("code",{className:"OrdersCustomer-state",children:e.isDelivered?"ENTREGADO\n(".concat(e.dateDelivered,")"):"POR ENTREGAR"})})]},e.id)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{colSpan:4,children:[r.length," ",1!==r.length?"\xf3rdenes":"\xf3rden"]})})})]}),Object(d.jsx)("article",{className:"OrdersCustomer-detail Card",children:Object(d.jsxs)("table",{className:"OrdersCustomer-table-items",children:[null!==m&&Object(d.jsxs)("caption",{children:["Orden: ",Object(d.jsx)("b",{children:m.id})]}),Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{style:{width:"5%"},children:"Cant"}),Object(d.jsx)("th",{style:{width:"55%"},children:"Descripci\xf3n"}),Object(d.jsx)("th",{style:{width:"20%"},children:"Precio"}),Object(d.jsx)("th",{style:{width:"20%"},children:"Importe"})]})}),Object(d.jsx)("tbody",{children:C.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"OrdersCustomer-col-number",children:e.qty}),Object(d.jsx)("td",{className:"OrdersCustomer-col-text",children:e.articleName}),Object(d.jsx)("td",{className:"OrdersCustomer-col-number",children:e.price}),Object(d.jsx)("td",{className:"OrdersCustomer-col-number",children:e.amount})]},e.id)}))}),null!==m&&Object(d.jsx)("tfoot",{className:"OrdersCustomer-detail-data",children:Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{colSpan:2,children:[m.items," art\xedculos"]}),Object(d.jsx)("td",{className:"OrdersCustomer-col-number",children:"Total"}),Object(d.jsxs)("td",{className:"OrdersCustomer-col-number",children:["$",m.total]})]})})]})})]})]})}),Q=function(){var e=Object(u.useContext)(h),t=e.fetchPost,c=e.customerSession,n={current:"",pass:"",confirm:""},s=Object(u.useState)(n),r=Object(j.a)(s,2),a=r[0],i=r[1],b=Object(u.useState)(""),O=Object(j.a)(b,2),m=O[0],x=O[1],p=Object(u.useState)(!1),f=Object(j.a)(p,2),C=f[0],v=f[1];function y(e){i(Object(N.a)(Object(N.a)({},a),{},Object(g.a)({},e.target.name,e.target.value)))}function S(){return(S=Object(o.a)(l.a.mark((function e(s){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.next=3,t("/customer_authorized.php?fn=isSamePass",{pass:a.current},c.token);case 3:if(null===(r=e.sent)){e.next=18;break}if(!r.isSamePass){e.next=16;break}if(a.pass!==a.confirm){e.next=13;break}return e.next=9,t("/customer_authorized.php?fn=changePass",{pass:a.pass},c.token);case 9:v(!0),x("La contrase\xf1a ha sido actualizada"),e.next=14;break;case 13:x("Nueva contrase\xf1a y confirmaci\xf3n son diferentes");case 14:e.next=17;break;case 16:x("Contrase\xf1a actual incorrecta");case 17:i(n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("form",{className:"FormCard",onSubmit:function(e){return S.apply(this,arguments)},children:[Object(d.jsx)("input",{type:"password",name:"current",value:a.current,placeholder:"Contrase\xf1a actual",onChange:y,required:!0}),Object(d.jsx)("input",{type:"password",name:"pass",value:a.pass,placeholder:"Nueva contrase\xf1a",onChange:y,required:!0}),Object(d.jsx)("input",{type:"password",name:"confirm",value:a.confirm,placeholder:"Confirmar nueva contrase\xf1a",onChange:y,required:!0}),!C&&Object(d.jsx)("input",{type:"submit",value:"Aceptar"}),0!==m.length&&Object(d.jsx)(k,{msg:m,btnCloseClick:function(){return x("")},isSuccess:C})]})},K=function(){var e=Object(u.useContext)(h).customerSession,t=Object(a.f)();return Object(u.useEffect)((function(){return null===e&&t("/not-found"),function(){}}),[e,t]),e&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"CAMBIAR CONTRASE\xd1A"}),Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsx)(Q,{customerId:e?e.id:-1})})]})},Z=function(e){var t=e.isAutoRegister,c=Object(u.useContext)(h),n=c.fetchGet,s=c.fetchPost,r=c.fetchPut,a=c.customerSession,i=Object(u.useState)({email:"",fullname:"",phone:"",streetAndNumber:"",suburb:"",cp:"",town:"",pass:"",confirm:""}),b=Object(j.a)(i,2),O=b[0],m=b[1],x=Object(u.useState)(""),p=Object(j.a)(x,2),f=p[0],C=p[1],v=Object(u.useState)(!1),y=Object(j.a)(v,2),S=y[0],w=y[1],A=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/customer_authorized.php?fn=getCustomer&id=".concat(a.id),a.token);case 2:null!==(t=e.sent)&&(t=t.customer,m({email:t.email,fullname:t.fullname,phone:t.phone,streetAndNumber:t.streetAndNumber,suburb:t.suburb,cp:t.cp,town:t.town,pass:"",confirm:""}));case 4:case"end":return e.stop()}}),e)}))),[n,a]);function E(e){m(Object(N.a)(Object(N.a)({},O),{},Object(g.a)({},e.target.name,e.target.value)))}function D(){return(D=Object(o.a)(l.a.mark((function e(c){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!t){e.next=21;break}return e.next=4,n("/index.php?fn=isExistsCustomer&email=".concat(O.email,"&id=-1"));case 4:if(null===(i=e.sent)){e.next=19;break}if(i.isExistsCustomer){e.next=18;break}if(O.pass!==O.confirm){e.next=14;break}return e.next=10,s("/index.php?fn=insertCustomer&isAutoregister=".concat(t),O);case 10:null!==(i=e.sent)&&(w(!0),C("El cliente ha sido registrado, para activar tu cuenta ingresa a tu correo")),e.next=16;break;case 14:m(Object(N.a)(Object(N.a)({},O),{},{pass:"",confirm:""})),C("Contrase\xf1a y confirmaci\xf3n son diferentes");case 16:e.next=19;break;case 18:C("El correo ya se encuentra registrado");case 19:e.next=25;break;case 21:return e.next=23,r("/customer_authorized.php?fn=updateCustomer&id="+a.id,O,a.token);case 23:null!==(i=e.sent)&&(w(!0),C("Los datos han sido actualizados"));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){return a&&A(),function(){}}),[A,a]),Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsxs)("form",{className:"Form",onSubmit:function(e){return D.apply(this,arguments)},style:{display:S?"none":"block"},children:[Object(d.jsx)("label",{htmlFor:"email",children:"Correo"}),Object(d.jsx)("input",{type:"email",name:"email",id:"email",value:O.email,onChange:E,readOnly:!t,autoFocus:t,required:!0,style:{backgroundColor:t?"white":"gainsboro"}}),Object(d.jsx)("label",{htmlFor:"fullname",children:"Nombre completo"}),Object(d.jsx)("input",{type:"text",name:"fullname",id:"fullname",value:O.fullname,onChange:E,autoFocus:!t,required:!0}),Object(d.jsx)("label",{htmlFor:"phone",children:"Tel\xe9fono"}),Object(d.jsx)("input",{type:"text",name:"phone",id:"phone",value:O.phone,onChange:E,required:!0}),Object(d.jsx)("label",{htmlFor:"streetAndNumber",children:"Calle y n\xfamero"}),Object(d.jsx)("input",{type:"text",name:"streetAndNumber",id:"streetAndNumber",value:O.streetAndNumber,onChange:E,required:!0}),Object(d.jsxs)("div",{className:"Form-input-pair-inline",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"suburb",children:"Colonia"}),Object(d.jsx)("input",{type:"text",name:"suburb",id:"suburb",value:O.suburb,onChange:E,required:!0})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"cp",children:"C.P."}),Object(d.jsx)("input",{type:"text",name:"cp",id:"cp",value:O.cp,onChange:E,required:!0})]})]}),Object(d.jsx)("label",{htmlFor:"town",children:"Municipio"}),Object(d.jsx)("input",{type:"text",name:"town",id:"town",value:O.town,onChange:E,required:!0}),Object(d.jsxs)("div",{className:"Form-input-pair-inline",style:{display:t?"flex":"none"},children:[Object(d.jsxs)("div",{style:{width:"50%"},children:[Object(d.jsx)("label",{htmlFor:"pass",children:"Contrase\xf1a"}),Object(d.jsx)("input",{type:"password",name:"pass",id:"pass",value:O.pass,onChange:E,required:t})]}),Object(d.jsxs)("div",{style:{width:"50%"},children:[Object(d.jsx)("label",{htmlFor:"confirm",children:"Confirmar"}),Object(d.jsx)("input",{type:"password",name:"confirm",id:"confirm",value:O.confirm,onChange:E,required:t})]})]}),!S&&Object(d.jsx)("input",{type:"submit",value:"Guardar",style:{backgroundColor:"black",color:"white",height:"40px",marginTop:"20px",fontSize:"1rem",cursor:"pointer"}})]}),0!==f.length&&Object(d.jsx)(k,{msg:f,btnCloseClick:function(){return C("")},isSuccess:S})]})},Y=function(){var e=Object(u.useContext)(h).customerSession,t=Object(a.f)();return Object(u.useEffect)((function(){return null===e&&t("/not-found"),function(){}}),[e,t]),e&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"MIS DATOS"}),Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsx)(Z,{isAutoRegister:!1})})]})},ee=(c(38),c(39),function(e){var t=e.isShowModal,c=e.idOrder,n=e.btnAcceptClick,s=e.btnCancelClick,r=Object(u.useContext)(h),a=r.fetchGet,i=r.userSession,b=Object(u.useState)([]),O=Object(j.a)(b,2),m=O[0],x=O[1],p=Object(u.useState)(""),f=Object(j.a)(p,2),C=f[0],v=f[1],g=Object(u.useState)([]),N=Object(j.a)(g,2),k=N[0],y=N[1],S=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/category.php?fn=getAllCategories",i.token);case 2:null!==(t=e.sent)&&(t=t.categories,x(t),v(t[0].categoryName));case 4:case"end":return e.stop()}}),e)}))),[a,i]);Object(u.useEffect)((function(){return i&&S(),function(){}}),[S,i]);var w=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/article.php?fn=getAllArticlesFromCategoryName&categoryName=".concat(C),i.token);case 2:null!==(t=e.sent)&&y(t.articles);case 4:case"end":return e.stop()}}),e)}))),[a,C,i]);return Object(u.useEffect)((function(){return""!==C&&w(),function(){}}),[C,w]),i&&Object(d.jsx)("div",{className:t?"ModalAddArticle-background active":"ModalAddArticle-background",children:Object(d.jsxs)("div",{className:"ModalAddArticle-card",children:[Object(d.jsxs)("h3",{children:["Agregar art\xedculo al pedido: ",c]}),Object(d.jsxs)("section",{className:"ModalAddArticle-section-select",children:[Object(d.jsx)("label",{htmlFor:"select",children:"Categor\xeda "}),Object(d.jsx)("select",{name:"select",id:"select",onChange:function(e){v(e.target.value)},children:m.map((function(e,t){return Object(d.jsx)("option",{value:e.categoryName,children:e.categoryName},t)}))})]}),Object(d.jsxs)("table",{className:"ModalAddArticle-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"ID"}),Object(d.jsx)("th",{children:"Descripci\xf3n"}),Object(d.jsx)("th",{children:"Precio"}),Object(d.jsx)("th",{children:"Exist"}),Object(d.jsx)("th",{})]})}),Object(d.jsx)("tbody",{children:k.map((function(e,t){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"ModalAddArticle-col-number",children:e.id}),Object(d.jsx)("td",{style:{width:"50%"},children:e.articleName}),Object(d.jsxs)("td",{className:"ModalAddArticle-col-number",children:["$",e.price]}),Object(d.jsx)("td",{className:"ModalAddArticle-col-number",children:e.stock}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{className:"ModalAddArticle-btn-add",onClick:function(){return n(e.id)},children:"Agregar"})})]},t)}))})]}),Object(d.jsx)("div",{className:"ModalAddArticle-actions",children:Object(d.jsx)(E,{text:"Cancelar",onClick:s})})]})})}),te=function(){var e=Object(u.useContext)(h),t=e.fetchGet,c=e.fetchPost,n=e.fetchPut,s=e.fetchDelete,r=e.userSession,i=Object(u.useState)([]),b=Object(j.a)(i,2),O=b[0],m=b[1],p=Object(u.useState)(-1),f=Object(j.a)(p,2),C=f[0],v=f[1],k=Object(u.useState)(-1),y=Object(j.a)(k,2),E=y[0],I=y[1],F=Object(u.useState)(-1),M=Object(j.a)(F,2),T=M[0],P=M[1],R=Object(u.useState)([]),q=Object(j.a)(R,2),H=q[0],L=q[1],G=Object(u.useState)({isShowModal:!1,isDeleteOrder:!1,isRestore:!1,subject:"",id:-1}),B=Object(j.a)(G,2),U=B[0],W=B[1],J=Object(u.useState)([]),z=Object(j.a)(J,2),$=z[0],_=z[1],X=Object(u.useState)({firstDate:new Date(Date.now()-864e6).toLocaleDateString("en-CA"),lastDate:(new Date).toLocaleDateString("en-CA")}),V=Object(j.a)(X,2),Q=V[0],K=V[1],Z=Object(u.useState)({isShowModal:!1,idOrder:-1}),Y=Object(j.a)(Z,2),te=Y[0],ce=Y[1],ne=Object(a.f)(),se=Object(u.useCallback)(function(){var e=Object(o.a)(l.a.mark((function e(c){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer_authorized.php?fn=getItemsOrder&idOrder=".concat(c));case 2:null!==(n=e.sent)&&L(n.itemsOrder);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),re=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/customer.php?fn=getAllCustomers&txtSearch=",r.token);case 2:null!==(c=e.sent)&&_(c.customers);case 4:case"end":return e.stop()}}),e)}))),[t,r]),ae=Object(u.useCallback)(Object(o.a)(l.a.mark((function e(){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=document.getElementById("select").value,e.next=3,t("/order.php?fn=getAllOrders&idCustomer=".concat(c,"&firstDate=").concat(Q.firstDate,"&lastDate=").concat(Q.lastDate),r.token);case 3:null!==(n=e.sent)&&(ie(),m(n.orders),L([]));case 5:case"end":return e.stop()}}),e)}))),[t,r,Q.firstDate,Q.lastDate]);function ie(){var e=document.getElementsByClassName("active")[0];e&&e.classList.remove("active"),v(-1),I(-1),P(-1)}function le(e){if("TD"===e.target.tagName){ie();var t=parseInt(e.target.parentElement.id);v(t);var c=O.findIndex((function(e){return e.id===t}));I(c),c=$.findIndex((function(e){return e.id===O[c].idCustomer})),P(c),document.getElementById(t).classList.add("active"),se(t)}}function oe(){return(oe=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W({isShowModal:!0,isDeleteOrder:!1,isRestore:!1,subject:"\xbfEst\xe1s segur@ de eliminar el art\xedculo del pedido?",id:t});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(u.useEffect)((function(){return r?re():ne("/not-found"),function(){}}),[re,ne,r]),Object(u.useEffect)((function(){return r?ae():ne("/not-found"),function(){}}),[r,ne,ae]);var je=function(){var e=Object(o.a)(l.a.mark((function e(){var t,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U.isDeleteOrder){e.next=7;break}return c=U.isRestore?{id:U.id,isRestore:!0}:{id:U.id},e.next=4,s("/order.php?fn=deleteOrder",c,r.token);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,s("/order.php?fn=deleteItemOrder",{id:U.id},r.token);case 9:t=e.sent;case 10:n=!U.isDeleteOrder,null!==t&&(W({isShowModal:!1,isDeleteOrder:!1,isRestore:!1,subject:"",id:-1}),n?ue():ae());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ue(){return de.apply(this,arguments)}function de(){return(de=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:v(C),document.getElementById(C).classList.add("active"),se(C),t=O.findIndex((function(e){return e.id===C})),I(t),t=$.findIndex((function(e){return e.id===O[t].idCustomer})),P(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=Object(o.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=H.findIndex((function(e){return e.id===t})),!(H[c].qty>=2)){e.next=6;break}return e.next=4,n("/order.php?fn=updateItemQty",{id:t,qty:-1},r.token);case 4:null!==e.sent&&ue();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/order.php?fn=updateItemQty",{id:t,qty:1},r.token);case 2:null!==e.sent&&ue();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){K(Object(N.a)(Object(N.a)({},Q),{},Object(g.a)({},e.target.name,e.target.value)))}function me(){return(me=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/order.php?fn=deliverOrder&idOrder=".concat(t),{},r.token);case 2:null!==e.sent&&(-1===C?ae():ue());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(Object(N.a)(Object(N.a)({},te),{},{isShowModal:!1,idOrder:-1})),e.next=3,c("/order.php?fn=insertItemOrder",{idOrder:C,idArticle:t,qty:1},r.token);case 3:null!==e.sent&&ue();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r&&Object(d.jsxs)("div",{className:"Orders-table-detail",children:[Object(d.jsxs)("table",{className:"Orders-table",children:[Object(d.jsx)("caption",{children:Object(d.jsx)("h3",{children:"Pedidos"})}),Object(d.jsxs)("thead",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{colSpan:3,children:[Object(d.jsx)("label",{htmlFor:"firstDate",children:"Desde "}),Object(d.jsx)("input",{type:"date",name:"firstDate",id:"firstDate",className:"Orders-input Orders-date",value:Q.firstDate,onChange:he}),Object(d.jsx)("label",{htmlFor:"lastDate",children:"  Hasta "}),Object(d.jsx)("input",{type:"date",name:"lastDate",id:"lastDate",className:"Orders-input Orders-date",value:Q.lastDate,onChange:he})]}),Object(d.jsxs)("td",{colSpan:4,children:["Cliente\xa0",Object(d.jsxs)("select",{className:"Orders-input",name:"select",id:"select",onChange:function(e){ae()},children:[Object(d.jsx)("option",{value:"-1",children:"Todos"}),$.map((function(e){return Object(d.jsxs)("option",{value:e.id,children:[e.fullname," ","("+e.email+")"]},e.id)}))]})]})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{style:{width:"10%"},children:"Orden"}),Object(d.jsx)("th",{style:{width:"20%"},children:"Fecha"}),Object(d.jsx)("th",{style:{width:"60%"},children:"Cliente"}),Object(d.jsx)("th",{style:{width:"5%"},children:"Arts"}),Object(d.jsx)("th",{style:{width:"15%"},children:"Total"}),Object(d.jsx)("th",{}),Object(d.jsx)("th",{})]})]}),Object(d.jsx)("tbody",{children:O.map((function(e,t){return Object(d.jsxs)("tr",{id:e.id,onClick:le,children:[Object(d.jsx)("td",{className:"Orders-col-number",children:e.id}),Object(d.jsx)("td",{children:e.created}),Object(d.jsx)("td",{children:e.fullname}),Object(d.jsx)("td",{className:"Orders-col-number",children:e.items}),Object(d.jsxs)("td",{className:"Orders-col-number",children:["$",new Intl.NumberFormat("es-MX",{maxFractionDigits:2}).format(e.total)]}),Object(d.jsx)("td",{children:e.isDelivered?Object(d.jsx)("code",{className:"Orders-label",children:"ENTREGADO\n"+e.dateDelivered}):Object(d.jsx)(w,{text:"Entregar",onClick:function(){return function(e){return me.apply(this,arguments)}(e.id)}})}),Object(d.jsx)("td",{children:e.isDelivered?r.isAdmin&&Object(d.jsx)(A,{text:"Eliminar",onClick:function(){return t=e.id,void W({isShowModal:!0,isDeleteOrder:!0,isRestore:!1,subject:"\xbfEst\xe1s segur@ de eliminar el pedido?",id:t});var t}}):Object(d.jsx)(A,{text:"Cancelar",onClick:function(){return t=e.id,void W({isShowModal:!0,isDeleteOrder:!0,isRestore:!0,subject:"\xbfEst\xe1s segur@ de cancelar el pedido?",id:t});var t}})})]},e.id)}))}),Object(d.jsx)("tfoot",{children:Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{colSpan:4,children:[O.length," ",1!==O.length?"\xf3rdenes":"\xf3rden"]})})})]}),Object(d.jsx)("article",{className:"Orders-detail Card",children:Object(d.jsxs)("table",{className:"Orders-table-items",children:[C>-1&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("caption",{children:Object(d.jsxs)("b",{children:["Pedido: ",C]})}),T>-1&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("caption",{children:$[T].fullname}),Object(d.jsx)("caption",{children:$[T].email}),Object(d.jsx)("caption",{children:$[T].phone}),Object(d.jsx)("caption",{children:$[T].streetAndNumber}),Object(d.jsxs)("caption",{children:[$[T].suburb,", CP: ",$[T].cp]}),Object(d.jsx)("caption",{children:$[T].town}),!O[E].isDelivered&&Object(d.jsx)("caption",{style:{textAlign:"end"},children:Object(d.jsx)(S,{text:"Agregar",onClick:function(){ce({isShowModal:!0,idOrder:C})}})})]})]}),Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{style:{width:"35%"},children:"Cant"}),Object(d.jsx)("th",{style:{width:"45%"},children:"Descripci\xf3n"}),Object(d.jsx)("th",{style:{width:"10%"},children:"Precio"}),Object(d.jsx)("th",{style:{width:"10%"},children:"Importe"}),Object(d.jsx)("th",{})]})}),Object(d.jsx)("tbody",{children:H.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:E>-1&&O[E].isDelivered?e.qty:Object(d.jsxs)("div",{className:"Orders-wrapper-qty",children:[Object(d.jsx)(x.g,{className:"Orders-icon",onClick:function(){return function(e){return be.apply(this,arguments)}(e.id)}}),e.qty,Object(d.jsx)(x.h,{className:"Orders-icon",onClick:function(){return function(e){return Oe.apply(this,arguments)}(e.id)}})]})}),Object(d.jsx)("td",{className:"Orders-col-text",children:e.articleName}),Object(d.jsx)("td",{className:"Orders-col-number",children:e.price}),Object(d.jsx)("td",{className:"Orders-col-number",children:e.amount}),Object(d.jsx)("td",{children:H.length>1&&E>-1&&!O[E].isDelivered&&Object(d.jsx)(x.b,{className:"Orders-icon-delete",onClick:function(){return function(e){return oe.apply(this,arguments)}(e.id)}})})]},e.id)}))}),C>-1&&Object(d.jsx)("tfoot",{className:"Orders-detail-data",children:Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{colSpan:2,children:[H.length," art\xedculos"]}),Object(d.jsx)("td",{className:"Orders-col-number",children:"Total"}),Object(d.jsxs)("td",{className:"Orders-col-number",children:["$",new Intl.NumberFormat("es-MX",{maximumFractionDigits:2}).format(O.find((function(e){return e.id===C})).total)]})]})})]})}),Object(d.jsx)(D,{isShowModal:U.isShowModal,subject:U.subject,btnDeleteClick:je,btnCancelClick:function(){W({isShowModal:!1,isDeleteOrder:!1,isRestore:!1,subject:"",id:-1})}}),Object(d.jsx)(ee,{isShowModal:te.isShowModal,idOrder:te.idOrder,btnAcceptClick:function(e){return xe.apply(this,arguments)},btnCancelClick:function(){ce(Object(N.a)(Object(N.a)({},te),{},{isShowModal:!1,idOrder:-1}))}})]})},ce=function(){return window.history.replaceState(null,"","/not-found"),Object(d.jsxs)("div",{className:"Wrapper-flex",style:{flexDirection:"column",alignItems:"center"},children:[Object(d.jsx)("h3",{children:"P\xe1gina no encontrada"}),Object(d.jsx)("code",{children:"(Error 404)"}),Object(d.jsx)(r.b,{to:"/",children:Object(d.jsx)("p",{children:"INICIO"})})]})},ne=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"REGISTRO DE CLIENTE"}),Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsx)(Z,{isAutoRegister:!0})})]})},se=function(){var e=Object(u.useContext)(h),t=e.customerSession,c=e.fetchGet,n=e.fetchPut,s=Object(a.g)(),i=Object(u.useState)(-1),b=Object(j.a)(i,2),O=b[0],m=b[1],x=Object(u.useState)(""),p=Object(j.a)(x,2),f=p[0],C=p[1],v=Object(u.useState)(!1),g=Object(j.a)(v,2),N=g[0],y=g[1],S=Object(a.f)();return Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/index.php?fn=getIdCustomerFromToken&token=".concat(s.token));case 2:if(null===(t=e.sent)){e.next=15;break}if(m(t.idCustomer),!(t.idCustomer>-1)){e.next=13;break}return e.next=8,n("/index.php?fn=activateCustomer",{idCustomer:t.idCustomer});case 8:t=e.sent,y(!0),C("Tu cuenta ha sido activada."),e.next=15;break;case 13:y(!1),C("El link de activaci\xf3n no es v\xe1lido.");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.history.replaceState(null,"","/customer-activation"),!t&&s.token?function(){e.apply(this,arguments)}():S("/not-found")}),[t,s,S,c,n]),!t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"ACTIVACI\xd3N DE CUENTA"}),Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"Card",style:{width:"300px"},children:[Object(d.jsx)(k,{msg:f,isSuccess:N}),O>-1&&Object(d.jsx)(r.b,{to:"/input",children:Object(d.jsx)("p",{children:"Iniciar sesi\xf3n"})})]})})]})},re=function(){var e=Object(u.useContext)(h),t=e.customerSession,c=e.fetchGet,n=e.fetchPut,s=Object(u.useState)(""),r=Object(j.a)(s,2),i=r[0],b=r[1],O=Object(u.useState)({msg:"",isSuccess:!1}),m=Object(j.a)(O,2),x=m[0],p=m[1],f=Object(a.f)();function C(){return(C=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c("/index.php?fn=getIdCustomerFromEmail&email=".concat(i));case 3:if(null===(n=e.sent)){e.next=13;break}if(!(n.idCustomer>-1)){e.next=12;break}return e.next=8,c("/index.php?fn=sendEmailRecoveryPass&id=".concat(n.idCustomer,"&email=").concat(i));case 8:null!==(n=e.sent)&&n.isSendedEmailRecoveryPass&&p({msg:"Correo enviado. Ingresa a tu correo\npara restaurar tu contrase\xf1a.",isSuccess:!0}),e.next=13;break;case 12:p({msg:"El correo no se encuentra registrado",isSuccess:!1});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){t&&f("/not-found")}),[t,f,c,n]),!t&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"OLVID\xc9 MI CONTRASE\xd1A"}),Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"FormCard",children:[!x.isSuccess&&Object(d.jsxs)("form",{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(d.jsx)("input",{type:"email",name:"email",placeholder:"Correo",value:i,onChange:function(e){b(e.target.value)}}),Object(d.jsx)("input",{type:"submit",value:"Enviarme correo de restauraci\xf3n"})]}),x.msg.length>0&&Object(d.jsx)(k,{msg:x.msg,btnCloseClick:function(){p(Object(N.a)(Object(N.a)({},x),{},{msg:""}))},isSuccess:x.isSuccess})]})})]})},ae=function(){var e=Object(u.useContext)(h),t=e.customerSession,c=e.fetchGet,n=e.fetchPut,s=Object(a.g)(),i=Object(u.useState)(-1),b=Object(j.a)(i,2),O=b[0],m=b[1],x=Object(u.useState)({pass:"",confirm:""}),p=Object(j.a)(x,2),f=p[0],C=p[1],v=Object(u.useState)({msg:"",isSuccess:!1}),y=Object(j.a)(v,2),S=y[0],w=y[1],A=Object(a.f)();function E(e){C(Object(N.a)(Object(N.a)({},f),{},Object(g.a)({},e.target.name,e.target.value)))}function D(){return(D=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f.pass!==f.confirm){e.next=8;break}return e.next=4,n("/index.php?fn=changePassCustomer",{id:O,pass:f.pass});case 4:null!==e.sent&&(C({pass:"",confirm:""}),w({msg:"Tu contrase\xf1a ha sido restaurada.",isSuccess:!0})),e.next=10;break;case 8:C({pass:"",confirm:""}),w({msg:"Las contrase\xf1as son diferentes.",isSuccess:!1});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/index.php?fn=getIdCustomerFromToken&token=".concat(s.token));case 2:null!==(t=e.sent)&&(m(t.idCustomer),t.idCustomer>-1?w({msg:"",isSuccess:!1}):w({msg:"El link para restaurar tu contrase\xf1a\nno es v\xe1lido.",isSuccess:!1}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.history.replaceState(null,"","/customer-pass-restore"),!t&&s.token?function(){e.apply(this,arguments)}():A("/not-found")}),[t,s,A,c,n]),!t&&s.token&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{className:"ProductsTitle",children:"RESTAURAR CONTRASE\xd1A"}),Object(d.jsx)("div",{className:"Wrapper-flex",children:Object(d.jsxs)("div",{className:"FormCard",children:[O>-1&&!S.isSuccess&&Object(d.jsxs)("form",{onSubmit:function(e){return D.apply(this,arguments)},children:[Object(d.jsx)("input",{type:"password",name:"pass",placeholder:"Nueva contrase\xf1a",value:f.pass,onChange:E,required:!0}),Object(d.jsx)("input",{type:"password",name:"confirm",placeholder:"Confirmar nueva contrase\xf1a",value:f.confirm,onChange:E,required:!0}),Object(d.jsx)("input",{type:"submit",value:"Aceptar"})]}),S.msg.length>0&&Object(d.jsx)(k,{msg:S.msg,isSuccess:S.isSuccess}),S.isSuccess&&Object(d.jsx)(r.b,{to:"/input",children:Object(d.jsx)("p",{children:"Iniciar sesi\xf3n"})})]})})]})};function ie(){return Object(d.jsx)("div",{className:"Body-wrapper",children:Object(d.jsx)(r.a,{children:Object(d.jsxs)(m,{children:[" ",Object(d.jsx)(C,{}),Object(d.jsx)("main",{className:"Main",children:Object(d.jsxs)(a.c,{children:[Object(d.jsx)(a.a,{path:"/",element:Object(d.jsx)(v,{})}),Object(d.jsx)(a.a,{path:"/productos/:search/:txtSearch",element:Object(d.jsx)(U,{})}),Object(d.jsx)(a.a,{path:"/producto-detalle/:id",element:Object(d.jsx)(J,{})}),Object(d.jsx)(a.a,{path:"/input",element:Object(d.jsx)(q,{})}),Object(d.jsx)(a.a,{path:"/admin",element:Object(d.jsx)(y,{})}),Object(d.jsx)(a.a,{path:"/users",element:Object(d.jsx)(F,{})}),Object(d.jsx)(a.a,{path:"/user-insert",element:Object(d.jsx)(T,{})}),Object(d.jsx)(a.a,{path:"/user-update/:id",element:Object(d.jsx)(P,{})}),Object(d.jsx)(a.a,{path:"/user-pass",element:Object(d.jsx)(R,{})}),Object(d.jsx)(a.a,{path:"/categories",element:Object(d.jsx)(H,{})}),Object(d.jsx)(a.a,{path:"/category-insert",element:Object(d.jsx)(L,{})}),Object(d.jsx)(a.a,{path:"/category-update/:id",element:Object(d.jsx)(L,{})}),Object(d.jsx)(a.a,{path:"/articles",element:Object(d.jsx)(G,{})}),Object(d.jsx)(a.a,{path:"/article-insert",element:Object(d.jsx)(B,{})}),Object(d.jsx)(a.a,{path:"/article-update/:id",element:Object(d.jsx)(B,{})}),Object(d.jsx)(a.a,{path:"/orders",element:Object(d.jsx)(te,{})}),Object(d.jsx)(a.a,{path:"/customers",element:Object(d.jsx)(z,{})}),Object(d.jsx)(a.a,{path:"/customer-insert",element:Object(d.jsx)($,{})}),Object(d.jsx)(a.a,{path:"/customer-update/:id",element:Object(d.jsx)($,{})}),Object(d.jsx)(a.a,{path:"/customer-register",element:Object(d.jsx)(ne,{})}),Object(d.jsx)(a.a,{path:"/customer-activation/:token",element:Object(d.jsx)(se,{})}),Object(d.jsx)(a.a,{path:"/customer-pass-lost",element:Object(d.jsx)(re,{})}),Object(d.jsx)(a.a,{path:"/customer-pass-restore/:token",element:Object(d.jsx)(ae,{})}),Object(d.jsx)(a.a,{path:"/carrito",element:Object(d.jsx)(_,{})}),Object(d.jsx)(a.a,{path:"/customer-orders",element:Object(d.jsx)(V,{})}),Object(d.jsx)(a.a,{path:"/customer-pass",element:Object(d.jsx)(K,{})}),Object(d.jsx)(a.a,{path:"/customer-data",element:Object(d.jsx)(Y,{})}),Object(d.jsx)(a.a,{path:"/*",element:Object(d.jsx)(ce,{})}),Object(d.jsx)(a.a,{path:"/not-found",element:Object(d.jsx)(ce,{})})]})}),Object(d.jsx)(X,{})]})})})}s.a.render(Object(d.jsx)(ie,{}),document.getElementById("root"))}]),[[40,1,2]]]);
//# sourceMappingURL=main.45222c90.chunk.js.map